#!groovy

properties([disableConcurrentBuilds()])

pipeline {
    parameters {
            choice(choices: ['Cube', 'Sphere', 'Cone', 'Torus'], description: '', name: 'Type of objects')
            string(defaultValue: '', description: '', name: 'Count of objects', trim: false)
            choice(choices: ['IES', 'Physical'], description: '', name: 'Type of light')
            string(defaultValue: '', description: '', name: 'Count of materials', trim: false) 
            string(defaultValue: '', description: '', name: 'Count of light', trim: false) 
            booleanParam(defaultValue: false, description: '', name: 'Use IBL')
            string(defaultValue: '', description: '', name: 'Max Samples', trim: false) 
            string(defaultValue: '', description: '', name: 'Threshold', trim: false)
    }
    agent { 
        label 'Agent'
        }
    options {
        buildDiscarder(logRotator(numToKeepStr: '10', artifactNumToKeepStr: '10'))
        timestamps()
    }
    stages {
        stage("First step") {
            steps {
                /*echo "${params.Typeofobjects}"
                echo "${params.Countofobjects}"
                echo "${params.Type_of_light}"
                echo "${params.Count_of_materials}"
                echo "${params.Count_of_light}"
                echo "${params.Use_IBL}"
                echo "${params.Threshold}"
                echo "${params.MaxSamples}"
                */
                echo "mayapy D:/Workspace/test_scpirts/test.py -ot ${params.Typeofobjects} -oc ${params.Countofobjects}"
                echo "${params}"
                // D:\Autodesk\Maya\Maya2019\bin>mayapy D:\Workspace\test_scpirts\test.py -ot 'Cube'
            }
        }
    }
}

